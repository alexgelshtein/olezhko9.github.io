<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Коллажы</title>

</head>

<body>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            let canvas = document.createElement('canvas');
            canvas.setAttribute('id', 'collage');
            canvas.width = 640;
            canvas.height = 480;
            document.body.appendChild(canvas);

            cross = {
                x: Math.round(1 / 3 * canvas.width + Math.random() * 1 / 3 * canvas.width),
                y: Math.round(1 / 3 * canvas.height + Math.random() * 1 / 3 * canvas.height),
            }

            console.log(cross);

            var ctx = canvas.getContext("2d");
            ctx.fillStyle = "red"
            ctx.fillRect(0, 0, cross.x, cross.y);

            ctx.fillStyle = "blue"
            ctx.fillRect(cross.x, 0, canvas.width, cross.y);

            ctx.fillStyle = "green"
            ctx.fillRect(0, cross.y, cross.x, canvas.height);

            ctx.fillStyle = "yellow"
            ctx.fillRect(cross.x, cross.y, canvas.width, canvas.height);

            getQoute()
                .then((quote) => console.log(quote))
                .catch((err) => console.error(err));
        });

        let getQoute = function() {
            return new Promise(function(resolve, reject) {
                let xhr = new XMLHttpRequest();
                xhr.open('GET', 'http://fizmatspb.ru/itmoweb/lab3/requester.php', true);
                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

                xhr.onreadystatechange = function() {
                    if (this.readyState == 4) {
                        if (xhr.status != 200) {
                            reject(new Error(xhr.status + ': ' + xhr.statusText));
                        } else {
                            resolve(xhr.responseText)
                        }
                    }
                }

                xhr.send();
            });
        }

    </script>
</body>

</html>
